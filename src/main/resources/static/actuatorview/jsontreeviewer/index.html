<!DOCTYPE html>
<html>
<head>
    <title>jsonTreeViewer</title>
    <meta charset="utf-8" />
    
    <link href="libs/app/reset.css" rel="stylesheet" />
    <link href="libs/app/app.css" rel="stylesheet" />
    <link href="libs/jsonTree/jsonTree.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
</head>
<body class="jsontree_bg">
    <noscript>
        <div id="noscript">
        Please, enable javascript in your browser
        </div>
    </noscript>

    <!-- Buttons -->
    <header id="header">
        <nav id="nav" class="clearfix">
            <ul class="menu menu_level1">
                <li data-action="expand" class="menu__item">
                    <span class="menu__item-name">expand all</span>
                </li>
                <li data-action="collapse" class="menu__item">
                    <span class="menu__item-name">collapse all</span>
                </li>
                <li data-action="find_and_mark" class="menu__item">
                    <span class="menu__item-name">find and mark</span>
                </li>
                <li data-action="unmark_all" class="menu__item">
                    <span class="menu__item-name">unmark all</span>
                </li>
            </ul>
        </nav>
        <div id="coords"></div>
        <div id="debug"></div>
    </header>
    
    <!-- json tree -->
    <div id="wrapper">
    
        <div id="tree"></div>
    
    </div>

    <!-- Find nodes form -->
    <form id="find_nodes_form" class="form" data-header="Find nodes">
        <section>
            <p>
                <label>
                    <input type="radio" 
                        name="nodes_search_type" 
                        value="label" 
                        id="nodes_search_by_label"
                        checked="checked" />
                    By label name:
                </label>
            </p>
            <input type="text" id="search_by_label_name" />
        </section>
        <section>
            <p>
                <label>
                    <input type="radio" 
                        name="nodes_search_type"
                        id="nodes_search_by_type" 
                        value="type" />
                    By value type:
                </label>
            </p>
            <ul class="checkboxes">
                <li>
                    <label>
                        <input type="checkbox" name="nodes_type" value="string" />
                        string
                    </label>
                </li>
                <li>
                    <label>
                        <input type="checkbox" name="nodes_type" value="number" />
                        number
                    </label>
                </li>
                <li>
                    <label>
                        <input type="checkbox" name="nodes_type" value="boolean" />
                        boolean
                    </label>
                </li>
                <li>
                    <label>
                        <input type="checkbox" name="nodes_type" value="null" />
                        null
                    </label>
                </li>
                <li>
                    <label>
                        <input type="checkbox" name="nodes_type" value="object" />
                        object
                    </label>
                </li>
                <li>
                    <label>
                        <input type="checkbox" name="nodes_type" value="array" />
                        array
                    </label>
                </li>
            </ul>
        </section>
        <button id="find_button">Find and mark</button>
    </form>

    <!-- For source JSON -->
    <div class="code" id="source_json" data-header="Source JSON"></div>

    <script src="libs/app/App.js"></script>
    <script src="libs/jsonTree/jsonTree.js"></script>
    <script src="jsonTreeViewer.js"></script>
    <script type="text/javascript">
        var urlParams = new URLSearchParams(window.location.search);
        var uri = urlParams.get('uri');
        fetch(uri)
        .then((res)=> {
          return res.text();
        })
        .then((data) => {
          jsonTreeViewer.parse(data);
        })
        .catch((err) => {
          console.log(err);
        })
    </script>
</body>
</html>
